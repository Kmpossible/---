<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Aljan ğŸ’–</title>

<!-- Preload final GIF for instant display -->
<link rel="preload" as="image"
href="https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExMG9kZXF1N2swcDByMWtndXB4OHdrMzJ3MHcwOGYzenk3ODlybm85eCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/26FLdmIp6wJr91JAI/giphy.gif">

<style>
body{
  margin:0;
  height:100vh;
  overflow:hidden;
  font-family: Arial, sans-serif;
  display:flex;
  justify-content:center;
  align-items:center;
  text-align:center;

  /* ğŸŒ¸ Baby pink background (FAST on phone) */
  background: linear-gradient(135deg, #ffd6e8, #ffb6c1);
}

.card{
  width:min(440px,92vw);
  padding:22px 16px;
  border-radius:20px;
  background: rgba(255,255,255,0.95);
  box-shadow:0 12px 40px rgba(0,0,0,.18);
}

h1{font-size:26px;margin:10px 0;}
p{margin:8px 0 0; opacity:.9;}

button{
  border:none;
  border-radius:14px;
  padding:12px 22px;
  font-size:18px;
  cursor:pointer;
  user-select:none;
}

#yesBtn{
  background:#ff4d88;
  color:#fff;
  position:relative;
}

.tiny{font-size:12px;opacity:.8;margin-top:10px;}

.heart{
  position:fixed;
  bottom:-60px;
  font-size:38px;
  pointer-events:none;
  animation:floatUp linear forwards;
}
@keyframes floatUp{
  to{transform:translateY(-120vh);opacity:0;}
}

.confirmBox{
  margin-top:14px;
  padding:12px;
  border-radius:16px;
  background: rgba(255,230,240,.85);
}

.burst{
  position:fixed;
  font-size:24px;
  pointer-events:none;
  animation:burst 650ms forwards;
}
@keyframes burst{
  to{transform:translate(var(--dx),var(--dy)) scale(1.3);opacity:0;}
}

.endGif{
  margin-top:14px;
  width:260px;
  max-width:85vw;
  border-radius:16px;
  box-shadow:0 10px 24px rgba(0,0,0,.18);
}
</style>
</head>

<body>

<div class="card" id="card">
  <h1>Aljan, can you be my boyfriend? ğŸ’–</h1>
  <button id="yesBtn">YES</button>
  <div class="tiny">The button is shy ğŸ˜ˆ</div>
</div>

<audio id="bgm">
  <source src="music.mp3" type="audio/mpeg">
</audio>

<script>
const hearts=["ğŸ’–","ğŸ’—","ğŸ’","ğŸ’•","ğŸ’˜","â¤ï¸"];
const END_GIF="https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExMG9kZXF1N2swcDByMWtndXB4OHdrMzJ3MHcwOGYzenk3ODlybm85eCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/26FLdmIp6wJr91JAI/giphy.gif";

// preload image for mobile
const preloadImg = new Image();
preloadImg.src = END_GIF;

// floating hearts (lighter load)
let heartsInterval = setInterval(()=>{
  const h=document.createElement("div");
  h.className="heart";
  h.textContent=hearts[Math.floor(Math.random()*hearts.length)];
  h.style.left=Math.random()*100+"vw";
  h.style.animationDuration=(3+Math.random()*3)+"s";
  document.body.appendChild(h);
  setTimeout(()=>h.remove(),6000);
},320);

// music
const bgm=document.getElementById("bgm");
let musicStarted=false;
function startMusic(){
  if(musicStarted) return;
  musicStarted=true;
  bgm.currentTime=0;
  bgm.play().catch(()=>{});
  setTimeout(()=>{
    bgm.pause();
    bgm.currentTime=0;
  },20000);
}

// burst
function heartBurst(x,y){
  for(let i=0;i<10;i++){
    const p=document.createElement("div");
    p.className="burst";
    p.textContent=hearts[Math.floor(Math.random()*hearts.length)];
    p.style.left=x+"px";
    p.style.top=y+"px";
    p.style.setProperty("--dx",(Math.random()*160-80)+"px");
    p.style.setProperty("--dy",(Math.random()*160-80)+"px");
    document.body.appendChild(p);
    setTimeout(()=>p.remove(),650);
  }
}

const yesBtn=document.getElementById("yesBtn");
const card=document.getElementById("card");
let dodges=0;
let unlocked=false;

function dodge(){
  if(unlocked) return;
  dodges++;
  yesBtn.style.transform=`translate(${Math.random()*200-100}px,${Math.random()*120-60}px)`;
  if(dodges>=3) showSure();
}

// start music when he TRIES to click yes
yesBtn.addEventListener("pointerdown", startMusic);
yesBtn.addEventListener("mouseover", dodge);
yesBtn.addEventListener("touchstart", e=>{e.preventDefault();dodge();});

yesBtn.addEventListener("click", e=>{
  if(!unlocked) return;

  clearInterval(heartsInterval);
  document.querySelectorAll(".heart").forEach(h=>h.remove());

  heartBurst(e.clientX||innerWidth/2,e.clientY||innerHeight/2);

  card.innerHTML=`
    <h1>I love you, Mister ko ğŸ’–ğŸ¥°</h1>
    <img class="endGif" src="${END_GIF}" alt="love gif">
    <p>Now youâ€™re officially my boyfriend ğŸ˜ˆğŸ’˜</p>
  `;
});

function showSure(){
  if(document.getElementById("sureBox")) return;
  const box=document.createElement("div");
  box.className="confirmBox";
  box.id="sureBox";
  box.innerHTML=`
    <h1 style="font-size:22px;">Are you sure? ğŸ˜</h1>
    <label style="display:flex;gap:10px;justify-content:center;align-items:center;">
      <input type="checkbox" id="sureCheck">
      Yes, Iâ€™m sure ğŸ˜Œ
    </label>
  `;
  card.appendChild(box);

  document.getElementById("sureCheck").addEventListener("change",e=>{
    unlocked=e.target.checked;
    yesBtn.textContent=unlocked?"YES âœ…":"YES";
    yesBtn.style.transform="translate(0,0)";
  });
}
</script>
</body>
</html>
